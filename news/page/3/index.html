<!doctype html>
<html lang="en">

<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="alternate" type="application/atom+xml" href="/news/feed.xml" title="Ruma" />

<meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'none';
    style-src 'self' 'unsafe-inline';
    frame-src 'none'">

<title>News | Ruma</title>

<link rel="stylesheet" href="/normalize.css">
<link rel="stylesheet" href="/site.css">

<nav class="site-nav">
    <ul>
    
        <li><a href="&#x2F;">Home</a></li>
    
        <li><a href="&#x2F;news&#x2F;">News</a></li>
    
        <li><a href="&#x2F;projects&#x2F;">Projects using Ruma</a></li>
    
        <li><a href="https:&#x2F;&#x2F;liberapay.com&#x2F;ruma&#x2F;">Donate on Liberapay</a></li>
    
        <li><a href="&#x2F;docs&#x2F;">Documentation</a></li>
    
    </ul>
</nav>

<div class="page">
    

<main class="content">
    <h1 class="section-title">
        News
        <a href="/news/feed.xml"><svg viewBox="0 0 1536 1536" width="26" height="26" xmlns="http://www.w3.org/2000/svg">
    <title>News feed (Atom)</title>
    <path d="M384 1344c0 106-86 192-192 192S0 1450 0 1344s86-192 192-192 192 86 192 192zm512 123c1 18-5 35-17 48-12 14-29 21-47 21H697c-33 0-60-25-63-58-29-305-271-547-576-576-33-3-58-30-58-63V704c0-18 7-35 21-47 11-11 27-17 43-17h5c213 17 414 110 565 262 152 151 245 352 262 565zm512 2c1 17-5 34-18 47-12 13-28 20-46 20h-143c-34 0-62-26-64-60C1104 895 641 432 60 398c-34-2-60-30-60-63V192c0-18 7-34 20-46 12-12 28-18 44-18h3c350 18 679 165 927 414 249 248 396 577 414 927z"/>
</svg>
</a> 
    </h1>
    

    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-08-04/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-08-04" itemprop="datePublished">2019-08-04</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>I forgot to provide an update last week, so this week we've got two weeks of stuff to cover.
The revamp of ruma-events I mentioned several times previously was released as <a href="https://github.com/ruma/ruma-events/releases/tag/0.13.0">0.13.0</a>, followed shortly by an update to <a href="https://github.com/ruma/ruma-events/releases/tag/0.14.0">0.14.0</a> to bump the url crate (which is a re-exported dependency) to version 2.0.
When trying to integrate the new ruma-events into ruma-client-api, <a href="https://github.com/jplatte">Jonas</a> quickly discovered that it wasn't actually possible, because API requests/responses that contain events need to be deserialized, and can't because the events don't have a public implementation of <code>serde::Deserialize</code> anymore.
I felt like an idiot for not foreseeing this seemingly obvious problem, but that's the way it goes sometimes.
I'll be working on addressing this next week.</p>
<p>A new version of ruma-api, <a href="https://github.com/ruma/ruma-events/releases/tag/ruma-api-0.10.0">0.10.0</a>, was released this week.
This release contains two significant changes:
The first is that the <code>Endpoint</code> trait has been revised to be implemented in terms of the endpoint's request type, rather than having the request be specified via an associated type.
This creates a more straightforward mapping between request and response types for each endpoint, removes a bunch of unnecessary unit structs that were only used to link associated request and response types together, and lets us remove some use of the turbofish operator in ruma-client.
The second change in this release is that ruma-api-macros has been merged into the repo, and now exists in a Cargo workspace.
The <code>ruma_api</code> procedural macro is now included and re-export from ruma-api itself under a default feature.
The macro has also been updated to refer to its dependencies via a hidden module in ruma-api.
The result is that downstream crates like ruma-client-api no longer have to specify dependnecies on all the crates referenced by the code generated by the macro.</p>
<p>Another exiciting update:
This past week, both Jonas and I started live streaming our development on Twitch.
I made a <a href="https://www.jimmycuadra.com/posts/twitch-live-streams-of-ruma-development/">separate post on my own blog</a> about this, but the short version is that I intend to live stream most of my work on Ruma from now on to help people learn about both Rust and Matrix.
You can find my live streams on <a href="https://www.twitch.tv/jimmycuadra">my Twitch channel</a>, and you can watch the recordings of past streams on <a href="https://www.youtube.com/channel/UCnflGGv5ZM2kdn9RPb2NG6Q">my YouTube channel</a>.
I'll announce my streams in <a href="https://matrix.to/#/#ruma:matrix.org">#ruma:matrix.org</a> as well as on <a href="https://twitter.com/jimmycuadra">my Twitter feed</a>.
Jonas's live streams can be watched on <a href="https://www.twitch.tv/jplatte">his Twitch channel</a>.</p>
<p>In the last update, I mentioned that Ruma finally <a href="https://liberapay.com/ruma/">accepts donations via Liberapay</a>.
Thank you very much to the people who have already signed on to donate to the project!
I thought it wouldn't hurt to mention again in case anyone missed it. :}</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-07-21/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-07-21" itemprop="datePublished">2019-07-21</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>This week I'd like to officially welcome <a href="https://github.com/jplatte">Jonas Platte</a> as a member of the Ruma team.
Jonas has been involved in the project for a long time and has provided many significant contributions, both via code and via discussions about the project's design.
Jonas is the original author of ruma-gtk, a graphical Matrix client built on ruma-client, which later became <a href="https://github.com/fest-im/fest">Fest</a>, which in turn was forked to create <a href="https://wiki.gnome.org/Apps/Fractal">Fractal</a>.
Thank you very much for all your work, Jonas!</p>
<p>A new addition to the website this week is the <a href="/contributing/">how to contribute</a> page, which offers an entry point for anyone interested in contributing to the project's software.
Thank you to everyone who has expressed interest in contributing in the past (and for everyone who will in the future!)
Hopefully this guide will help you get started and give you some ideas for how to help.</p>
<p>On several occasions I've been asked if there is a way to donate financially to the project.
I'm happy to report that Ruma now <a href="https://liberapay.com/ruma/">accepts donations via Liberapay</a>.
Donations to the project will be divided amongst team members, which as of today consists of only Jonas and me, but will hopefully grow over time.
In the past I was hesitant to accept donations because I didn't want financial interest to affect (or have the appearance of affecting) my decisions about the project.
I am building Ruma because I think the world needs Matrix, not as a way to support myself.
Being able to share donations to Ruma with other developers makes me much more comfortable with accepting donations.
It serves both to dilute my own financial interest in the project as well as to provide benefit in a way that's more in tune with the project's goals: making the world better for all of us.
For anyone that decides to support the project on Liberapay, I offer my most sincere thanks.</p>
<p>As for the software itself, the main update this week is that the revamp of ruma-events I've been working on for the past month is complete and has been merged into the master branch.
I still need to do one quick pass over everything to be sure I didn't make any obvious mistakes, but once that's done it will be ready for a new release.
As part of this revamp, a new supporting crate, <a href="https://github.com/ruma/ruma-events-macros">ruma-events-macros</a> also had its first release this week.
Like ruma-api-macros, it's really only used as an internal dependency for the project, and doesn't have much use to other developers directly.
But it could be interesting to look at if you want an example of a real-world procedural macro.</p>
<p>There was also a new release of ruma-api, <a href="https://github.com/ruma/ruma-api/releases/tag/0.9.0">version 0.9.0</a>, which revises the API to support the upcoming futures 0.3, ironically by removing the dependency on futures entirely.
This release also removes the library's dependency on hyper, as it's always been a goal for the foundational Ruma libraries to allow other developers to build Matrix software with other HTTP libraries if they wish.</p>
<h2 id="matrix-at-large">Matrix at large</h2>
<p><a href="https://riot.im/">Riot</a>, the flagship Matrix client, <a href="https://medium.com/@RiotChat/%EF%B8%8Fmessage-editing-%EF%B8%8F-reactions-5cffec8f71a2">released version 1.3</a> this week, which includes the ability to edit sent messages, and to add reactions to messages.
Both of these features are highly requested and bring Riot in line with other high-profile collaboration software.</p>
<p>Other notable news is the announcement to get <a href="https://github.com/matrix-org/dendrite">Dendrite</a>, a Matrix homeserver written in Go, into a state where it can have some practical use for Matrix users.
The first goal is for it to support enough functionality to be used for Matrix bots.
Read more about this announcement on <a href="https://matrix.org/blog/2019/07/19/this-week-in-matrix-2019-07-19">the lastest This Week in Matrix</a>.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-07-14/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-07-14" itemprop="datePublished">2019-07-14</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>In the <a href="/news/this-week-in-ruma-2019-07-07/">last update</a>, I mentioned that the ongoing ruma-events revamp was impeded by an issue with types from <em>ring</em> which don't implement <code>Clone</code> and <code>PartialEq</code>.
It turns out that there is <a href="https://github.com/briansmith/ring/pull/727">a reasonable explanation for this</a>, and so it was decided to work around it.
I restructured the ruma-signatures types in question so that they don't contain <em>ring</em> types, but simply construct them and use them as-needed in the relevant methods.</p>
<p>While I was working on ruma-signatures, I decided to fill in the missing functionality—signing and verifying events.
In the process of doing that, I ended up with a significantly revised API for the crate, which has now been released as <a href="https://github.com/ruma/ruma-signatures/releases/tag/0.5.0">version 0.5.0</a>.
In a somewhat amusing development, the new ruma-signatures API doesn't include the <code>Signatures</code> and <code>SignatureSet</code> types that were causing the issue in ruma-events in the first place.
As a result, ruma-events is not only unblocked, but doesn't have depend on ruma-signatures at all.</p>
<p>I made a little bit more progress on ruma-events.
There is only one module remaining to be updated to the new API, so we're on the home stretch for a new ruma-events release.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-07-07/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-07-07" itemprop="datePublished">2019-07-07</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>Work continues on the major revamp of ruma-events <a href="/news/this-week-in-ruma-2019-06-23/">mentioned in the last update</a>.
Only a few modules remain to be converted to the new API.
It's not hard work, but it's a bit tedious, so I've been dragging on getting it done.
There are also a few modules that are somewhat blocked on <a href="https://github.com/briansmith/ring/issues/859">an issue in <em>ring</em></a>.
Some of the types in ruma-events contain types from ruma-signatures which don't implement <code>Clone</code> and <code>PartialEq</code> because they contain types from <em>ring</em> which don't.
I want all event types in ruma-events to implement these traits.
I say this issue is &quot;somewhat blocked&quot; because I could always just modify ruma-events-macros to derive these traits conditionally and then just leave them out for the few types in question, but this would be an unfortunate workaround, so I'd prefer to have the issue solved upstream.
Unfortunately, the issue hasn't received a reply from any maintainers since I opened it a few weeks ago.
No hard feelings—that's how open source works sometimes.</p>
<h2 id="rust-at-large">Rust at large</h2>
<p>The big news in Rust since the last update is that <a href="https://blog.rust-lang.org/2019/07/04/Rust-1.36.0.html">Rust 1.36 was released</a>, and it includes stabilization of the <code>Future</code> trait, one of the long-awaited building blocks for first-class async support in Rust.
As readers probably already know, the biggest reason for Ruma's development hiatus is waiting for async networking in Rust to mature, and this is one of the final pieces of foundational support we've been waiting for.
The remaining pieces are <code>async</code>/<code>await</code> syntax, which is expected in either the next version or the one following it, and finally, waiting for important libraries like Hyper and Tokio, as well as web frameworks, to adopt the new stuff.
I also consider <a href="https://github.com/rust-lang/rfcs/pull/2071">support for <code>impl Trait</code> in traits</a> to be an important feature that is not yet supported, but at this point Ruma doesn't seem to need this, so while it's a major missing component of Rust's async support, it doesn't seem likely to block Ruma development.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-06-23/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-06-23" itemprop="datePublished">2019-06-23</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>This week was spent working on a big revamp of <a href="https://github.com/ruma/ruma-events">ruma-events</a>, the library that defines Rust types for the &quot;events&quot; used in Matrix.
The previous week, I did a pass through the entire library to bring it up to date with version r0.5.0 of the Matrix specification.</p>
<p>After some discussion in <a href="https://matrix.to/#/#ruma:matrix.org">#ruma:matrix.org</a>, I decided to make a move towards treating ruma-events as a higher-level library.
Previously, ruma-events has more or less offered Rust types that are exact representations of the JSON structures used by Matrix.
However, by representing events this way, it would be possible for users to easily create values that, while valid JSON, would be invalid events according to the specification.</p>
<p>The way we're approaching this problem is by separating serialization/deserialization of JSON from validation of events.
Rather than directly implementing <code>serde::Deserialize</code>, event types will be converted from a string of JSON data using <code>std::str::FromStr</code>.
This implementation will deserialize the data internally and then validate it, returning either a valid event, or a raw <code>serde_json::Value</code> along with an error message about why the event was invalid.
The latter form is necessary because invalid events will always be present in the Matrix system, created via bugs or other problems in homeserver implementations.
Once an event is in the event graph, other servers will receive these invalid events over federation, and must still persist them and deal with them as they are.</p>
<p>Similar to the new interface around deserialization, the serialized form of an event created by ruma-events may not directly match the structure of the Rust type.
ruma-events will instead expose variants of each event to ensure they can only be created in valid states.</p>
<p>To reduce the boilerplate that this approach necessarily causes (because for many events there will now be two structures: the public one and the private one used for converting to and from JSON), I started a new procedural macro, <a href="https://github.com/ruma/ruma-events-macros">ruma-events-macros</a>, to make the most common cases require minimal code in ruma-events.
It's been a lot of work, and there's still probably another week or more to go to finish implementing ruma-events using the new approach.
But when it's done, the result will be a Rust library for Matrix events that leaves less room for users to accidentally do the wrong thing, while also supporting interoperation with other Matrix software that isn't so strict.</p>

        </article>
    
</main>

<nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;www.ruma.io&#x2F;news&#x2F;page&#x2F;2&#x2F;"><span aria-hidden="true">&larr;</span> Newer entries</a>
        
    </div>
    <span class="page-number">3 / 10</span>
    <div class="next">
        
        <a href="https:&#x2F;&#x2F;www.ruma.io&#x2F;news&#x2F;page&#x2F;4&#x2F;">Older entries <span aria-hidden="true">&rarr;</span></a>
        
    </div>
</nav>



</div>

</html>
